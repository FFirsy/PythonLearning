# Day 19: 2026-2-24
## OOP记账系统
    class Ledger:
    def __init__(self, filename="ledger.txt"):
        self.filename = filename
        self.transactions = []
        self.load()

    # ================= 数据层 =================
    def load(self):
        try:
            with open(self.filename, "r") as f:
                for line in f:
                    line = line.strip()
                    if line:
                        try:
                            self.transactions.append(float(line))
                        except ValueError:
                            continue
        except FileNotFoundError:
            pass

    def save(self):
        with open(self.filename, "w") as f:
            for amount in self.transactions:
                f.write(f"{amount}\n")

    # ================= 业务层 =================
    def add_income(self, amount):
        if amount <= 0:
            raise ValueError("Income must be positive.")
        self.transactions.append(amount)
        self.save()

    def add_expense(self, amount):
        if amount <= 0:
            raise ValueError("Expense must be positive.")
        self.transactions.append(-amount)
        self.save()

    def get_balance(self):
        return sum(self.transactions)

    # ================= 展示层 =================
    def show_menu(self):
        print("\n1. Add Income")
        print("2. Add Expense")
        print("3. Show Balance")
        print("4. Exit")

    def run(self):
        while True:
            self.show_menu()
            choice = input("Enter your choice: ").strip()

            if choice == "1":
                try:
                    amount = float(input("Income amount: "))
                    self.add_income(amount)
                    print(f"Current balance: {self.get_balance():.2f}")
                except ValueError as e:
                    print(e)

            elif choice == "2":
                try:
                    amount = float(input("Expense amount: "))
                    self.add_expense(amount)
                    print(f"Current balance: {self.get_balance():.2f}")
                except ValueError as e:
                    print(e)

            elif choice == "3":
                print(f"Current balance: {self.get_balance():.2f}")

            elif choice == "4":
                break
            else:
                print("Invalid choice.")

