# Day 17: 2026-2-21
## Level 1/2/3：基础文件写入

    def save_balance(balance):
        with open("balance.txt", "w") as f:
            f.write(str(balance))

    def load_balance():
        try:
            with open("balance.txt", "r") as f:
                content = f.read().strip()
                return float(content)
        except FileNotFoundError:
            return 0
        except ValueError:
            return 0

    def apply_transaction(balance, amount):
        return balance + amount

    def process_transactions(transactions):
        balance = load_balance()
        for transaction in transactions:
            new_balance = apply_transaction(balance, transaction)
    
            if new_balance < 0:
                return "Overdraft"
    
            balance = new_balance
            save_balance(balance)
        return balance
    
    def main(transactions):
        balance = process_transactions(transactions)
        if balance == "Overdraft":
            print("Overdraft detected")
        else:
            print("Final balance:", balance)

### 为什么要用 with open？  
使用 `with open` 确保文件正确关闭。  
### 为什么要处理 FileNotFoundError？  
如果 *文件不存在*，捕获 `FileNotFoundError` 并返回。  
*系统第一次运行时文件可能不存在。*
### 这是不是一种“容错设计”？  
是的。  
### 余额现在属于“运行时状态”还是“持久状态”？   
持久状态。   
### 这是不是比之前更接近真实系统？   
是的   
### 如果文件内容被人为改坏，会发生什么？   
系统会崩溃，读取不到文件或是错误。   
### 为什么工程系统必须防“脏数据”？
因为工程系统通常是一个庞大的系统，他运用于实际生活中。脏数据会导致文件读取错误，导致系统崩溃，污染下游系统等等……
### 这是不是比算法题更接近真实开发？   
是的   